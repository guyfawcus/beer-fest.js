<!DOCTYPE html>

<html>
  <head>
    <meta charset="utf-8" />
    <title>ACBF Login</title>
    <link href="style.css" type="text/css" rel="stylesheet" />
    <link rel="icon" type="image/png" sizes="32x32" href="favicon-32x32.png" />
  </head>

  <body>
    <div class="warning_icon" title="Server disconnected!">X</div>
    <div class="settings_container">
      <div class="settings_header"><h1 id="title">ACBF Login</h1></div>
      <div class="settings_options">
        <div>
          <% if (messages.error) { %> <%= messages.error %> <% } %>
          <form action="/users" method="post">
            <div>
              <label for="name">Name:</label>
              <input type="text" id="name" name="name" placeholder="Your name (whatever you want)" required />
            </div>
            <div>
              <label for="code">Code:</label>
              <input type="password" id="code" name="code" placeholder="Given to you by Chesney" required />
            </div>
            <div class="submit_button">
              <button type="submit">Login</button>
            </div>
          </form>
        </div>
        <div><a href="/">Home</a></div>
      </div>
    </div>

    <script src="/socket.io/socket.io.js"></script>
    <script>
      const socket = io.connect(self.location.host);
      socket.on("connect", () => {
        console.log("Server connected");
        document.getElementsByClassName("warning_icon")[0].style.display = "none";
      });

      socket.on("disconnect", () => {
        window.setTimeout(function() {
          if (socket.connected !== true) {
            console.log("%cServer diconnected!", "color:red;");
            document.getElementsByClassName("warning_icon")[0].style.display = "grid";
          }
        }, 2000);
      });
    </script>
  </body>
</html>
