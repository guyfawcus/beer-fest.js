# Development

## Installation

1. Install [Node.js](https://nodejs.org/)
2. Install and run [Redis](https://redis.io/download)
3. `git clone https://github.com/guyfawcus/beer-fest.git`
4. `cd beer-fest`
5. `npm install`
6. `node server.js`
7. Open [127.0.0.1:8000](http://127.0.0.1:8000/) in an up-to-date browser

### Environment variables

- `ADMIN_CODE`- A bcrypt hashed password (take a look at [/utils/codegen.js](/utils/codegen.js))
- `COOKIE_SECRET` - A cryptographically secure random string (take a look at [/utils/codegen.js](/utils/codegen.js))
- `ENABLE_API` - `true` or `false` depending on whether you want to enable the API POST endpoints or not (can be left unset, defaults to `false`)
- `NODE_ENV` - set to `production` if deployed (can be left unset when developing)
- `REDIS_URL`- the `redis://` URL (can be left unset if using Redis with it's default settings)

## Coding

After you have installed the app with `npm install` you can get coding!
Installation will give you the following to help in working with this software:

- [DefinitelyTyped](https://github.com/DefinitelyTyped/DefinitelyTyped#readme) - For type checking and usage notes in your IDE
- [nodemon](https://nodemon.io/) - Restarts the server when you make a change to the code
- [Husky](https://github.com/typicode/husky#readme) - For running tests before committing and pushing with Git
- [Prettier](https://prettier.io/) - Code formatter to keep the style consistant
- [Standard JS](https://standardjs.com/) - Rules for linting the code with...
- [ESLint](https://eslint.org/) - Static analysis tool to for catching problems before they appear
- [JSDoc](https://jsdoc.app/) - For generating documentation

### Dev workflow

1. Swap to a new branch with `git checkout -b`
2. Run `nodemon server.js`
3. Make some changes
4. Run `npm run test`
5. Ensure your changes have had the desired effect
6. Commit your code with a message about what has changed (`git commit -a`)
7. Create a [pull request](https://help.github.com/en/github/collaborating-with-issues-and-pull-requests/about-pull-requests)
8. Have a beer!

## Documentation

The documentation for this project can be generated by running `npm run docs`. JSdoc is used to parse the comments and type annotations throughout the codebase. The output files are located in the `docs/jsdoc/` folder and can be viewed by opening up the homepage with `firefox docs/jsdoc/index.html`.
